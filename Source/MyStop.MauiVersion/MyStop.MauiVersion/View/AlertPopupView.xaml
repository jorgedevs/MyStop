<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="MyStop.MauiVersion.View.AlertPopupView"
    x:Name="alertPopup"
    BackgroundColor="#80000000"
    IsVisible="False">

    <Grid>
        <!-- Backdrop - tap to dismiss -->
        <BoxView
            BackgroundColor="Transparent"
            InputTransparent="False">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnBackdropTapped" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Popup Card -->
        <Border
            BackgroundColor="#3B70DF"
            VerticalOptions="Center"
            HorizontalOptions="Center"
            Margin="30"
            Padding="20"
            StrokeThickness="2"
            Stroke="White">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="16" />
            </Border.StrokeShape>

            <StackLayout Spacing="0" WidthRequest="300">
                <Label
                    Text="Set Bus Alert"
                    FontSize="22"
                    FontAttributes="Bold"
                    TextColor="White"
                    HorizontalOptions="Center" />

                <Label
                    x:Name="labelRouteInfo"
                    FontAttributes="Bold"
                    TextColor="White"
                    Margin="0,20,0,10"/>

                <HorizontalStackLayout>
                    <Label
                        Text="Alert me when bus is:"
                        TextColor="White"
                        VerticalOptions="Center" />

                    <Picker 
                        x:Name="pickerAlertTime"
                        Title="Select time" 
                        TextColor="White"
                        TitleColor="#CCCCCC"
                        SelectedIndexChanged="OnAlertTimeChanged">
                    </Picker>
                </HorizontalStackLayout>

                <HorizontalStackLayout>
                    <Label
                        Grid.Column="0"
                        Text="Notify every minute until arrival: "
                        FontSize="13"
                        TextColor="White"
                        VerticalOptions="Center" />

                    <Switch
                        Grid.Column="1"
                        x:Name="switchContinuous"
                        OnColor="#4CAF50"
                        ThumbColor="White" />
                </HorizontalStackLayout>

                <!-- Buttons -->
                <Grid ColumnSpacing="10" Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button
                        Grid.Column="0"
                        Text="Cancel"
                        BackgroundColor="#6C757D"
                        TextColor="White"
                        CornerRadius="8"
                        Clicked="OnCancelClicked" />

                    <Button
                        Grid.Column="1"
                        Text="Set Alert"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        CornerRadius="8"
                        FontAttributes="Bold"
                        Clicked="OnConfirmClicked" />
                </Grid>
            </StackLayout>
        </Border>
    </Grid>
</ContentView>
